using System;
using System.Collections.Generic;

internal class Program
{
    static void Main(string[] args)
    {
        bool exit = false;

        while (!exit)
        {
            Console.Clear();
            CenterText(" Welcome to Game Hub ");
            Console.WriteLine("\nChoose a game:");
            Console.WriteLine("1. Guess the Number");
            Console.WriteLine("2. Tic-Tac-Toe (XO)");
            Console.WriteLine("3. Rock-Paper-Scissors");
            Console.WriteLine("4. Exit");
            Console.Write("\nEnter your choice (1-4): ");
            string choice = Console.ReadLine().Trim();
            switch (choice)
            {
                case "1":
                    PlayGuessGame();
                    break;
                case "2":
                    PlayTicTacToe();
                    break;
                case "3":
                    PlayRockPaperScissors();
                    break;
                case "4":
                    exit = true;
                    Console.WriteLine("\nThanks for playing! Press any key to exit...");
                    Console.ReadKey();
                    break;
                default:
                    Console.WriteLine("Invalid choice. Press Enter to try again.");
                    Console.ReadLine();
                    break;
            }
        }
    }

   
    static void CenterText(string text)
    {
        int windowWidth = Console.WindowWidth;
        int leftPadding = (windowWidth - text.Length) / 2;
        Console.WriteLine(new string(' ', Math.Max(0, leftPadding)) + text);
    }

    // ================= Guess Game ===================
    static void PlayGuessGame()
    {
        bool playAgain = true;

        while (playAgain)
        {
            Console.Clear();
            CenterText("Welcome To Ur Game");
            CenterText("Guess the number challenge");
            CenterText("Type 'show' if u want to give up");

            int maxNumber = GetDifficultyLimit();
            Random rand = new Random();
            int secretNumber = rand.Next(1, maxNumber + 1);

            int attempt = 0;
            List<int> guesses = new List<int>();

            while (true)
            {
                Console.Write("\nEnter your guess: ");
                string input = Console.ReadLine().ToLower().Trim();

                if (input == "show")
                {
                    Console.WriteLine($"\nThe secret number is: {secretNumber}");
                    break;
                }

                if (!int.TryParse(input, out int guess))
                {
                    Console.WriteLine("Please enter a valid number.");
                    continue;
                }

                guesses.Add(guess);
                attempt++;

                if (guess < secretNumber)
                {
                    Console.ForegroundColor = ConsoleColor.Red;
                    Console.WriteLine("The number is higher than your guess.");
                    Console.ResetColor();
                }
                else if (guess > secretNumber)
                {
                    Console.ForegroundColor = ConsoleColor.Red;
                    Console.WriteLine("The number is lower than your guess.");
                    Console.ResetColor();
                }
                else
                {
                    Console.ForegroundColor = ConsoleColor.Green;
                    Console.WriteLine("\n🎉 CONGRATULATIONS! IT'S THE RIGHT NUMBER!");
                    Console.WriteLine($"\nYou guessed the number in {attempt} attempts.");
                    Console.ResetColor();
                    break;
                }
            }

            Console.WriteLine("\nYour guesses this round:");
            foreach (int g in guesses)
            {
                Console.Write(g + " ");
            }
            Console.WriteLine($"\nTotal Attempts: {attempt}");

            Console.Write("\n\nDo you want to play again? (yes/no): ");
            string response = Console.ReadLine().ToLower().Trim();
            playAgain = response == "yes";
        }
    }

    static int GetDifficultyLimit()
    {
        while (true)
        {
            Console.Write("\nEnter difficulty (easy / medium / hard): ");
            string level = Console.ReadLine().ToLower().Trim();

            switch (level)
            {
                case "easy":
                    Console.WriteLine("Guess number between 1 to 50");
                    return 50;
                case "medium":
                    Console.WriteLine("Guess number between 1 to 100");
                    return 100;
                case "hard":
                    Console.WriteLine("Guess number between 1 to 500");
                    return 500;
                default:
                    Console.WriteLine("Invalid input. Please enter 'easy', 'medium', or 'hard'.");
                    break;
            }
        }
    }

    // ================= XO Game ===================
    static void PlayTicTacToe()
    {
        char[] board = { '1', '2', '3', '4', '5', '6', '7', '8', '9' };
        int player = 1;
        int turns = 0;

        while (true)
        {
            Console.Clear();
            CenterText("Tic Tac Toe Game (XO)");
            Console.WriteLine("\nPlayer 1 (X)  -  Player 2 (O)\n");

            DisplayBoard(board);

            char mark = (player % 2 == 1) ? 'X' : 'O';
            Console.Write($"\nPlayer {(player % 2 == 1 ? 1 : 2)}, enter your choice (1-9): ");

            if (!int.TryParse(Console.ReadLine(), out int choice) || choice < 1 || choice > 9 || board[choice - 1] == 'X' || board[choice - 1] == 'O')
            {
                Console.WriteLine("Invalid move. Press Enter to try again.");
                Console.ReadLine();
                continue;
            }

            board[choice - 1] = mark;
            turns++;

            if (CheckWin(board))
            {
                Console.Clear();
                DisplayBoard(board);
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine($"\n🎉 Player {(player % 2 == 1 ? 1 : 2)} wins!");
                Console.ResetColor();

                break;
            }

            if (turns == 9)
            {
                Console.Clear();
                DisplayBoard(board);
                Console.WriteLine("\nIt's a draw!");
                break;
            }

            player++;
        }

        Console.WriteLine("\nPress Enter to return to main menu...");
        Console.ReadLine();
    }

    static void DisplayBoard(char[] board)
    {
        CenterText($"   {board[0]}   |   {board[1]}   |   {board[2]}   ");
        CenterText("-------+-------+-------");
        CenterText($"   {board[3]}   |   {board[4]}   |   {board[5]}   ");
        CenterText("-------+-------+-------");
        CenterText($"   {board[6]}   |   {board[7]}   |   {board[8]}   ");

    }

    static bool CheckWin(char[] b)
    {
        int[,] wins = {
            {0,1,2}, {3,4,5}, {6,7,8},
            {0,3,6}, {1,4,7}, {2,5,8},
            {0,4,8}, {2,4,6}
        };

        for (int i = 0; i < wins.GetLength(0); i++)
        {
            if (b[wins[i, 0]] == b[wins[i, 1]] && b[wins[i, 1]] == b[wins[i, 2]])
                return true;
        }

        return false;
    }
    //-------------rock-paper-scissors
    static void PlayRockPaperScissors()
    {
        string[] options = { "rock", "paper", "scissors" };
        Random rand = new Random();

        while (true)
        {
            Console.Clear();
            CenterText("Rock-Paper-Scissors Game");
            Console.Write("\nChoose (rock, paper, scissors) or type 'exit': ");
            string userChoice = Console.ReadLine().ToLower().Trim();

            if (userChoice == "exit") break;

            if (Array.IndexOf(options, userChoice) == -1)
            {
                Console.WriteLine("Invalid input. Press Enter to try again.");
                Console.ReadLine();
                continue;
            }

            string computerChoice = options[rand.Next(0, 3)];
            Console.WriteLine($"\nComputer chose: {computerChoice}");

            if (userChoice == computerChoice)
            {
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("It's a draw!");
            }
            else if (
                (userChoice == "rock" && computerChoice == "scissors") ||
                (userChoice == "scissors" && computerChoice == "paper") ||
                (userChoice == "paper" && computerChoice == "rock")
            )
            {
                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("You win!");
            }
            else
            {
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine("You lose!");
            }

            Console.ResetColor();
            Console.WriteLine("\nPress Enter to play again or type 'exit' next time.");
            Console.ReadLine();
        }
    }

}
